rules_version = '2';
service cloud.firestore {
	match /databases/{database}/documents {
		// Helper function to check if user is authenticated
		function isAuthenticated() {
			return request.auth != null;
		}
		
		// Helper function to check if user owns the document
		function isOwner(userId) {
			return request.auth.uid == userId;
		}

		// Rules for user_data collection
		match /user_data/{userId} {
			allow read: if isAuthenticated() && isOwner(userId);
			allow create: if isAuthenticated() && isOwner(userId);
			allow update: if isAuthenticated() && isOwner(userId);
			allow delete: if isAuthenticated() && isOwner(userId);
		}

		// Rules for news collection - readable by all authenticated users
		match /news/{articleId} {
			allow read: if isAuthenticated();
			// Only allow write operations by admin (you can implement admin check later)
			allow write: if false;
		}
	}
}